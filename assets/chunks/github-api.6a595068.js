import{p as u,w as m}from"./framework.1cf97b94.js";const f=r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),g={__name:"TextReplacer",props:{container:{type:String,default:"body"},pattern:{type:String,required:!0},replacement:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""}},setup(r){const t=r,s=(e,a,i)=>{a=new RegExp(f(a),"g"),document.querySelectorAll(e).forEach(p=>{p.innerHTML=p.innerHTML.replace(a,i)})};let n;return u(()=>{m(()=>t.replacement,e=>{if(t.replacement&&t.replacement!==""){const a=n||t.pattern,i=t.prefix+e+t.suffix;s(t.container,a,i),n=i}},{immediate:!0})}),(e,a)=>null}},o=30,d=async(r,t)=>l("latestVersion")?l("latestVersion"):await fetch(`https://api.github.com/repos/${r}/${t}/releases/latest`).then(s=>s.json()).then(s=>{var n;if(s.tag_name){const e=((n=s.tag_name.match(/(\d+\.\d+)[\-\.\da-zA-Z]+/))==null?void 0:n[0])??"latest";return e!==""&&c("latestVersion",e,o),e}else return fetch(`https://api.github.com/repos/${r}/${t}/tags`).then(e=>e.json()).then(e=>{if(e.length){const a=e[0].name.match(/(\d+\.\d+)[\-\.\da-zA-Z]+/)[0]??"";return a!==""&&c("latestVersion",a,o),a}return""})}),S=async(r,t)=>l("latestRelease")?l("latestRelease"):await fetch(`https://api.github.com/repos/${r}/${t}/releases/latest`).then(s=>s.json()).then(s=>{if(s.prerelease===!1){const n="latest";return c("latestRelease",n,o),n}else return fetch(`https://api.github.com/repos/${r}/${t}/tags`).then(n=>n.json()).then(n=>{if(n.length){const e=n[0].name.match(new RegExp("(?<=\\.\\d-)[^.]+"))[0]??"";return e!==""&&c("latestRelease",e,o),e}return""})});function c(r,t,s){const e={value:t,expiry:new Date().getTime()+s*1e3};sessionStorage.setItem(r,JSON.stringify(e))}function l(r){const t=sessionStorage.getItem(r);if(!t)return null;const s=JSON.parse(t);return new Date().getTime()>s.expiry?(sessionStorage.removeItem(r),null):s.value}export{g as _,S as a,d as g};
